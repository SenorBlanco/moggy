<!DOCTYPE html>
<html lang="en-us" xmlns="http://www.w3.org/1999/xhtml" xmlns:xlink="http://www.w3.org/1999/xlink" xml:lang="en-us">
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8" /></head><body>
<script>
</script>
<style>
h1 {
  display:inline; font-size:20px; padding:0 15px;
}
.big {
  font-size: 20px;
  font-family: sans-serif;
}
video {
  clear: right;
}
</style>
<span class="big">Current filter: </span><select class="big" id="select1"></select>
<br>
<video autoplay="true" loop="loop" id="video1" tabindex="0">
</video>
<svg id="image" width="0" height="0" version="1.1" xmlns="http://www.w3.org/2000/svg">
<defs>
<radialGradient id="grad1" cx="50%" cy="50%" fx="50%" fy="50%">
  <stop offset="0%" style="stop-color:rgb(255, 255, 255); stop-opacity:1;"/>
  <stop offset="10%" style="stop-color:rgb(0, 0, 0); stop-opacity:1;"/>
  <stop offset="20%" style="stop-color:rgb(255, 255, 255); stop-opacity:1;"/>
  <stop offset="30%" style="stop-color:rgb(0, 0, 0); stop-opacity:1;"/>
  <stop offset="40%" style="stop-color:rgb(255, 255, 255); stop-opacity:1;"/>
  <stop offset="50%" style="stop-color:rgb(0, 0, 0); stop-opacity:1;"/>
  <stop offset="60%" style="stop-color:rgb(255, 255, 255); stop-opacity:1;"/>
  <stop offset="70%" style="stop-color:rgb(0, 0, 0); stop-opacity:1;"/>
  <stop offset="80%" style="stop-color:rgb(255, 255, 255); stop-opacity:1;"/>
  <stop offset="90%" style="stop-color:rgb(0, 0, 0); stop-opacity:1;"/>
  <stop offset="100%" style="stop-color:rgb(0,0,0); stop-opacity:1;"/>
</radialGradient>
<circle id="circle" cx="500" cy="300" r="500" fill="url(#grad1)"/>
<filter id="big-squares" color-interpolation-filters="sRGB">
<feMorphology radius="15" operator="dilate"/>
</filter>
<filter id="turbulence" color-interpolation-filters="sRGB">
  <feTurbulence baseFrequency=".01" type="fractalNoise" numOctaves="3" seed="23" stitchTiles="stitch"/>
</filter>
<filter id="displaceleaf" color-interpolation-filters="sRGB">
  <feImage xlink:href="IMG_0854_SMALL.JPG" result="image"/>
  <feDisplacementMap scale="50" xChannelSelector="G" yChannelSelector="G" in="SourceGraphic" in2="image"/>
</filter>
<filter id="displacewave" color-interpolation-filters="sRGB">
  <feImage xlink:href="#circle" result="image"/>
  <feDisplacementMap scale="40" xChannelSelector="G" yChannelSelector="G" in="SourceGraphic" in2="image"/>
</filter>
<filter id="x-blur" color-interpolation-filters="sRGB">
  <feGaussianBlur stdDeviation="20 0"/>
</filter>
<filter id="classic-trek" color-interpolation-filters="sRGB">
  <feColorMatrix id="Saturate1" type="saturate" values="5.35" result="Saturate1"/>
  <feGaussianBlur id="Blur1" in="Saturate1" result="Blur1" stdDeviation="20"/>
  <feColorMatrix id="Opacity1" values="1 0 0 0 0,  0 1 0 0 0,  0 0 1 0 0,  0 0 0 0.64 0" in="Blur1" result="Opacity1"/>
  <feComposite id="Composite1" operator="over" in="Opacity1" in2="Saturate1"/>
</filter>
<filter id="edgy-squares" color-interpolation-filters="sRGB">
  <feMorphology operator="dilate" radius="5"/>
  <feConvolveMatrix kernelMatrix="1 -1  1  -1 -0.01 -1  1 -1  1" order="3"/>
</filter>
<filter id="inverse" color-interpolation-filters="sRGB">
  <feComponentTransfer>
    <feFuncR type="table" tableValues="1 0"/>
    <feFuncG type="table" tableValues="1 0"/>
    <feFuncB type="table" tableValues="1 0"/>
  </feComponentTransfer>
</filter>
<filter id="jimi" color-interpolation-filters="sRGB">
  <feColorMatrix type="hueRotate" values="275"/>
  <feColorMatrix type="saturate" values="15"/>
  <feDisplacementMap scale="50" xChannelSelector="R" yChannelSelector="G"/>
</filter>
<filter id="inverse" color-interpolation-filters="sRGB">
  <feComponentTransfer>
    <feFuncR type="table" tableValues="1 0"/>
    <feFuncG type="table" tableValues="1 0"/>
    <feFuncB type="table" tableValues="1 0"/>
  </feComponentTransfer>
</filter>
<filter id="edgy" color-interpolation-filters="sRGB">
  <feConvolveMatrix order="3" kernelMatrix="1 -1  1 -1 -0.01 -1 1 -1 1" edgeMode="duplicate" result="convo"/>
</filter>
<filter id="edgy-blur" color-interpolation-filters="sRGB">
  <feGaussianBlur in="SourceGraphic" stdDeviation="6" result="blur"/>
  <feConvolveMatrix order="3" kernelMatrix="1 -1  1 -1 -0.01 -1 1 -1 1" edgeMode="none" result="convo"/>
</filter>
<filter id="pointlight" color-interpolation-filters="sRGB">
  <feDiffuseLighting surfaceScale="1" diffuseConstant="1">
    <fePointLight x="0" y="0" z="100" id="fePointLight1"/>
  </feDiffuseLighting>
  <feBlend mode="multiply" in2="SourceGraphic"/>
</filter>
<filter id="spotlight" color-interpolation-filters="sRGB">
  <feDiffuseLighting surfaceScale="1" diffuseConstant="1">
    <feSpotLight x="0" y="0" z="100" specularExponent="1" limitingConeAngle="30" id="feSpotLight1"/>
  </feDiffuseLighting>
  <feBlend mode="multiply" in2="SourceGraphic"/>
</filter>
<filter id="black-and-white" color-interpolation-filters="sRGB">
  <feColorMatrix values="0.3333 0.3333 0.3333 0 0                                  0.3333 0.3333 0.3333 0 0                                 0.3333 0.3333 0.3333 0 0                                 0      0      0      1 0"/>
</filter>
<filter id="edgy2" color-interpolation-filters="sRGB">
  <feConvolveMatrix filterRes="100 100" order="3" kernelMatrix="0 -1 0   -1 4 -1   0 -1 0" preserveAlpha="true"/>
</filter>
<filter id="funhouse" x="0%" y="0%" height="100%" width="100%" color-interpolation-filters="sRGB">
  <feDisplacementMap scale="100" in2="SourceGraphic" xChannelSelector="G" yChannelSelector="R"/>
</filter>
<filter id="bluefill" x="0%" y="0%" width="100%" height="100%" color-interpolation-filters="sRGB">
  <feFlood flood-color="blue" result="A"/>
  <feColorMatrix type="matrix" in="SourceGraphic" result="B" values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  1 1 1 0 0"/>
  <feMerge>
    <feMergeNode in="A"/>
    <feMergeNode in="B"/>
  </feMerge>
</filter>
<filter id="noir" color-interpolation-filters="sRGB">
  <feGaussianBlur stdDeviation="1.5"/>
  <feComponentTransfer>
    <feFuncR type="discrete" tableValues="0 .5 1 1"/>
    <feFuncG type="discrete" tableValues="0 .5 1"/>
    <feFuncB type="discrete" tableValues="0"/>
  </feComponentTransfer>
</filter>
<filter id="glassy" color-interpolation-filters="sRGB">
  <feTurbulence id="Turbulence1" baseFrequency="0.057" numOctaves="1" type="fractalNoise" result="Turbulence1"/>
  <feDisplacementMap id="DisplacementMap1" scale="153.39" xChannelSelector="R" yChannelSelector="G" in="SourceGraphic"/>
</filter>
</defs>
</svg>
<script>
var video = document.querySelector('video');
var select = document.getElementById('select1');
var filters = ['x-blur', 'classic-trek', 'edgy-squares', 'pointlight', 'spotlight', 'jimi', 'big-squares', 'inverse','edgy','edgy-blur', 'black-and-white','noir','bluefill','glassy','funhouse', 'displaceleaf', 'displacewave'];
navigator.getMedia = navigator.getUserMedia ||
                     navigator.webkitGetUserMedia ||
                     navigator.mozGetUserMedia ||
                     navigator.msGetUserMedia;
if (navigator.getMedia) {
    navigator.getMedia({video: true}, function(localMediaStream) {
        video.src = window.URL.createObjectURL(localMediaStream);
    }, function(e) { console.log(e); });
}
video.addEventListener('loadedmetadata', function() {
  var centerX = video.videoWidth / 2;
  var centerY = video.videoHeight / 2;
  if (window.devicePixelRatio) {
    centerX *= window.devicePixelRatio;
    centerY *= window.devicePixelRatio;
  }

  var pointLight = document.getElementById("fePointLight1");
  var spotLight = document.getElementById("feSpotLight1");

  spotLight.setAttribute("pointsAtX", centerX);
  spotLight.setAttribute("pointsAtY", centerY);
  spotLight.setAttribute("pointsAtZ", 0);

  document.onmousemove = function(event) {
    var x = event.pageX, y = event.pageY;
    if (window.devicePixelRatio) {
      x *= window.devicePixelRatio;
      y *= window.devicePixelRatio;
    }
    pointLight.setAttribute("x", x);
    pointLight.setAttribute("y", y);
    spotLight.setAttribute("x", x);
    spotLight.setAttribute("y", y);
  }
});

for (var i = 0; i < filters.length; ++i) {
  var o = document.createElement("option");
  o.innerHTML = filters[i];
  o.value = filters[i];
  select.appendChild(o);
}
select.onchange = function() {
  video.style.filter='url(#'+select.value+')';
  video.style.webkitFilter='url(#'+select.value+')';
};
select.onchange();
</script>
</body>
</html>
